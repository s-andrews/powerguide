---
title: "Power Analysis"
author: "Power Guide (github.com/s-andrews/powerguide)"
date: "26 September 2017"
output: 
  html_document:
    theme: flatly
    toc: true
    toc_depth: 4
    toc_float: 
      collapsed: false
---

```{{r setup, include=FALSE}}
knitr::opts_chunk$set(echo = TRUE)
```

[![](powerguide_logo.png)](index.html)

#Power Analysis

This document provides an automated power analysis for use during experimental design.  The output below shows the R code used to perform the power analysis along with an exploration of some of the variables supplied to show what options you would have were some of the values entered later proved to be somewhat inaccurate.

This document was generated by the PowerGuide power analysis system.  If you have any questions or suggestions about this system please use the bug reporting tools at https://github.com/s-andrews/powerguide/issues to let us know about these, or send them directly to simon.andrews\@babraham.ac.uk.


#### Assumptions

All power analysis is based on a set of assumptions, either based on previous pilot experiments, or prior knowledge of the behaviour of variables in the scientific literature.  The values presented here were collected from the PowerGuide web interface and have not been automatically generated by this system.

The results produced here are only as accurate as the values entered in this assumptions section.

The assumptions made in this particular analysis are:

* Type of data : Categorial

* Number of conditions: 2

* Power of detection: {power}

* Signficnace threshold : {significance}

* Starting proportion : {start_proportion}

* Minimum interesting proportion : {end_proportion}

```{{r}}
  power.of.detection <- {power}
  significance.threshold <- {significance}
  start.proportion <- {start_proportion}
  end.proportion <- {end_proportion}
```

## Basic Power Analysis


```{{r}}
power.prop.test(
  p1 = start.proportion,
  p2 = end.proportion,
  sig.level = significance.threshold,
  power = power.of.detection/100,
  alternative = "two.sided"
) -> power.result

power.result
```

This shows that with the assumptions presented here you would need **`r I(ceiling(power.result$n))`** samples in each group to do what you want.


## Exploration

Since some of the values you put into the power analysis might well be estimates we can also look at the effect it would have on the sample size if some of the estimates were to prove inaccurate.


#### Varying Interesting Proportion

In a categorical analysis we might be interested in knowing how many samples we'd need to detect changes of different sizes.  Here we'll try several proportions around the values you suggested to see what effect this has on sample sizes.

```{{r fig.height=7, fig.width=7}}

if (end.proportion > start.proportion) {{
  end.range = seq(from=start.proportion,to=1, length.out=101)
  end.range <- end.range[-1]
}} else {{
  end.range = seq(from=0,to=start.proportion, length.out=101)
  end.range <- end.range[1:100]
}}


sapply(end.range,function(x) power.prop.test(
  p1 = start.proportion,
  p2 = x,
  sig.level = significance.threshold,
  power = power.of.detection/100,
  alternative = "two.sided")$n
) -> n.values



plot(
  end.range,
  n.values,
  las=1,
  xlab="Alternate Proportion",
  ylab="Number of samples required per group",
  main="Effect on sample size of varying the minimum interesting proportion",
  log="y"
)

abline(v=end.proportion,col="red2")
abline(h=power.result$n, col="red2")

```

![](powerguide_logo.png)

![](babraham.png)





